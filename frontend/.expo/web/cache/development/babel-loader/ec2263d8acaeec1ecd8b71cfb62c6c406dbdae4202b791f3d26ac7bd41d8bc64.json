{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport { getFirestore, doc, getDoc, collection, query, orderBy, getDocs, setDoc, deleteDoc } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { ScrollView } from 'react-native-gesture-handler';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { sendNotification } from \"../../../redux/actions/index\";\nimport { container, text, utils } from \"../../styles\";\nimport CachedImage from \"../random/CachedImage\";\nfunction Profile(props) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    userPosts = _useState2[0],\n    setUserPosts = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    following = _useState8[0],\n    setFollowing = _useState8[1];\n  var firestore = getFirestore();\n  var auth = getAuth();\n  useEffect(function () {\n    var fetchUserData = function fetchUserData() {\n      var currentUser, posts, userDoc, userSnapshot, postsQuery, postsSnapshot, userPostsData;\n      return _regeneratorRuntime.async(function fetchUserData$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            currentUser = props.currentUser, posts = props.posts;\n            if (!(props.route.params.uid === auth.currentUser.uid)) {\n              _context.next = 7;\n              break;\n            }\n            setUser(currentUser);\n            setUserPosts(posts);\n            setLoading(false);\n            _context.next = 27;\n            break;\n          case 7:\n            _context.prev = 7;\n            userDoc = doc(firestore, \"users\", props.route.params.uid);\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(getDoc(userDoc));\n          case 11:\n            userSnapshot = _context.sent;\n            if (userSnapshot.exists()) {\n              props.navigation.setOptions({\n                title: userSnapshot.data().username\n              });\n              setUser(_objectSpread({\n                uid: props.route.params.uid\n              }, userSnapshot.data()));\n            }\n            postsQuery = query(collection(firestore, \"posts\", props.route.params.uid, \"userPosts\"), orderBy(\"creation\", \"desc\"));\n            _context.next = 16;\n            return _regeneratorRuntime.awrap(getDocs(postsQuery));\n          case 16:\n            postsSnapshot = _context.sent;\n            userPostsData = postsSnapshot.docs.map(function (doc) {\n              return _objectSpread({\n                id: doc.id\n              }, doc.data());\n            });\n            setUserPosts(userPostsData);\n            _context.next = 24;\n            break;\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](7);\n            console.error(\"Error fetching user data:\", _context.t0);\n          case 24:\n            _context.prev = 24;\n            setLoading(false);\n            return _context.finish(24);\n          case 27:\n            setFollowing(props.following.includes(props.route.params.uid));\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }, null, null, [[7, 21, 24, 27]], Promise);\n    };\n    fetchUserData();\n  }, [props.route.params.uid, props.following, props.currentUser, props.posts]);\n  var onFollow = function onFollow() {\n    var followDoc;\n    return _regeneratorRuntime.async(function onFollow$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          followDoc = doc(firestore, \"following\", auth.currentUser.uid, \"userFollowing\", props.route.params.uid);\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(setDoc(followDoc, {}));\n        case 4:\n          props.sendNotification(user.notificationToken, \"New Follower\", props.currentUser.name + \" started following you\", {\n            type: 'profile',\n            user: auth.currentUser.uid\n          });\n          _context2.next = 10;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(\"Error following user:\", _context2.t0);\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n  var onUnfollow = function onUnfollow() {\n    var followDoc;\n    return _regeneratorRuntime.async(function onUnfollow$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          followDoc = doc(firestore, \"following\", auth.currentUser.uid, \"userFollowing\", props.route.params.uid);\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(deleteDoc(followDoc));\n        case 4:\n          _context3.next = 9;\n          break;\n        case 6:\n          _context3.prev = 6;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(\"Error unfollowing user:\", _context3.t0);\n        case 9:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n  if (loading) {\n    return React.createElement(View, {\n      style: {\n        height: '100%',\n        justifyContent: 'center',\n        margin: 'auto'\n      }\n    }, React.createElement(ActivityIndicator, {\n      style: {\n        alignSelf: 'center',\n        marginBottom: 20\n      },\n      size: \"large\",\n      color: \"#00ff00\"\n    }), React.createElement(Text, {\n      style: [text.notAvailable]\n    }, \"Loading\"));\n  }\n  if (!user) {\n    return React.createElement(View, {\n      style: {\n        height: '100%',\n        justifyContent: 'center',\n        margin: 'auto'\n      }\n    }, React.createElement(FontAwesome5, {\n      style: {\n        alignSelf: 'center',\n        marginBottom: 20\n      },\n      name: \"dizzy\",\n      size: 40,\n      color: \"black\"\n    }), React.createElement(Text, {\n      style: [text.notAvailable]\n    }, \"User Not Found\"));\n  }\n  return React.createElement(ScrollView, {\n    style: [container.container, utils.backgroundWhite]\n  }, React.createElement(View, {\n    style: [container.profileInfo]\n  }, React.createElement(View, {\n    style: [utils.noPadding, container.row]\n  }, user.image === 'default' ? React.createElement(FontAwesome5, {\n    style: [utils.profileImageBig, utils.marginBottomSmall],\n    name: \"user-circle\",\n    size: 80,\n    color: \"black\"\n  }) : React.createElement(Image, {\n    style: [utils.profileImageBig, utils.marginBottomSmall],\n    source: {\n      uri: user.image\n    }\n  }), React.createElement(View, {\n    style: [container.container, container.horizontal, utils.justifyCenter, utils.padding10Sides]\n  }, React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage]\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center]\n  }, userPosts.length), React.createElement(Text, {\n    style: [text.center]\n  }, \"Posts\")), React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage]\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center]\n  }, user.followersCount), React.createElement(Text, {\n    style: [text.center]\n  }, \"Followers\")), React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage]\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center]\n  }, user.followingCount), React.createElement(Text, {\n    style: [text.center]\n  }, \"Following\")))), React.createElement(View, null, React.createElement(Text, {\n    style: text.bold\n  }, user.name), React.createElement(Text, {\n    style: [text.profileDescription, utils.marginBottom]\n  }, user.description), props.route.params.uid !== auth.currentUser.uid ? React.createElement(View, {\n    style: [container.horizontal]\n  }, following ? React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container, utils.margin15Right],\n    onPress: onUnfollow\n  }, React.createElement(Text, {\n    style: [text.bold, text.center, text.green]\n  }, \"Following\")) : React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container, utils.margin15Right],\n    onPress: onFollow\n  }, React.createElement(Text, {\n    style: [text.bold, text.center, {\n      color: '#2196F3'\n    }]\n  }, \"Follow\")), React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container],\n    onPress: function onPress() {\n      return props.navigation.navigate('Chat', {\n        user: user\n      });\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center]\n  }, \"Message\"))) : React.createElement(TouchableOpacity, {\n    style: utils.buttonOutlined,\n    onPress: function onPress() {\n      return props.navigation.navigate('Edit');\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center]\n  }, \"Edit Profile\")))), React.createElement(View, {\n    style: [utils.borderTopGray]\n  }, React.createElement(FlatList, {\n    numColumns: 3,\n    horizontal: false,\n    data: userPosts,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(TouchableOpacity, {\n        style: [container.containerImage, utils.borderWhite],\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Post\", {\n            item: item,\n            user: user\n          });\n        }\n      }, item.type === 0 ? React.createElement(CachedImage, {\n        cacheKey: item.id,\n        style: container.image,\n        source: {\n          uri: item.downloadURLStill\n        }\n      }) : React.createElement(CachedImage, {\n        cacheKey: item.id,\n        style: container.image,\n        source: {\n          uri: item.downloadURL\n        }\n      }));\n    }\n  })));\n}\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    posts: store.userState.posts,\n    following: store.userState.following\n  };\n};\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return bindActionCreators({\n    sendNotification: sendNotification\n  }, dispatch);\n};\nexport default connect(mapStateToProps, mapDispatchProps)(Profile);","map":{"version":3,"names":["FontAwesome5","getFirestore","doc","getDoc","collection","query","orderBy","getDocs","setDoc","deleteDoc","getAuth","React","useEffect","useState","ActivityIndicator","FlatList","Image","Text","TouchableOpacity","View","ScrollView","connect","bindActionCreators","sendNotification","container","text","utils","CachedImage","Profile","props","_useState","_useState2","_slicedToArray","userPosts","setUserPosts","_useState3","_useState4","user","setUser","_useState5","_useState6","loading","setLoading","_useState7","_useState8","following","setFollowing","firestore","auth","fetchUserData","currentUser","posts","userDoc","userSnapshot","postsQuery","postsSnapshot","userPostsData","_regeneratorRuntime","async","fetchUserData$","_context","prev","next","route","params","uid","awrap","sent","exists","navigation","setOptions","title","data","username","_objectSpread","docs","map","id","t0","console","error","finish","includes","stop","Promise","onFollow","followDoc","onFollow$","_context2","notificationToken","name","type","onUnfollow","onUnfollow$","_context3","createElement","style","height","justifyContent","margin","alignSelf","marginBottom","size","color","notAvailable","backgroundWhite","profileInfo","noPadding","row","image","profileImageBig","marginBottomSmall","source","uri","horizontal","justifyCenter","padding10Sides","center","containerImage","bold","large","length","followersCount","followingCount","profileDescription","description","buttonOutlined","margin15Right","onPress","green","navigate","borderTopGray","numColumns","renderItem","_ref","item","borderWhite","cacheKey","downloadURLStill","downloadURL","mapStateToProps","store","userState","mapDispatchProps","dispatch"],"sources":["C:/Users/alexd/Documents/InstagramClone/frontend/components/main/profile/Profile.js"],"sourcesContent":["import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { getFirestore, doc, getDoc, collection, query, orderBy, getDocs, setDoc, deleteDoc } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActivityIndicator, FlatList, Image, Text, TouchableOpacity, View } from 'react-native';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { sendNotification } from '../../../redux/actions/index';\r\nimport { container, text, utils } from '../../styles';\r\nimport CachedImage from '../random/CachedImage';\r\n\r\nfunction Profile(props) {\r\n    const [userPosts, setUserPosts] = useState([]);\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [following, setFollowing] = useState(false);\r\n\r\n    const firestore = getFirestore();\r\n    const auth = getAuth();\r\n\r\n    useEffect(() => {\r\n        const fetchUserData = async () => {\r\n            const { currentUser, posts } = props;\r\n\r\n            if (props.route.params.uid === auth.currentUser.uid) {\r\n                setUser(currentUser);\r\n                setUserPosts(posts);\r\n                setLoading(false);\r\n            } else {\r\n                try {\r\n                    const userDoc = doc(firestore, \"users\", props.route.params.uid);\r\n                    const userSnapshot = await getDoc(userDoc);\r\n\r\n                    if (userSnapshot.exists()) {\r\n                        props.navigation.setOptions({\r\n                            title: userSnapshot.data().username,\r\n                        });\r\n                        setUser({ uid: props.route.params.uid, ...userSnapshot.data() });\r\n                    }\r\n\r\n                    const postsQuery = query(\r\n                        collection(firestore, \"posts\", props.route.params.uid, \"userPosts\"),\r\n                        orderBy(\"creation\", \"desc\")\r\n                    );\r\n                    const postsSnapshot = await getDocs(postsQuery);\r\n                    const userPostsData = postsSnapshot.docs.map(doc => ({\r\n                        id: doc.id,\r\n                        ...doc.data(),\r\n                    }));\r\n                    setUserPosts(userPostsData);\r\n\r\n                } catch (error) {\r\n                    console.error(\"Error fetching user data:\", error);\r\n                } finally {\r\n                    setLoading(false);\r\n                }\r\n            }\r\n\r\n            setFollowing(props.following.includes(props.route.params.uid));\r\n        };\r\n\r\n        fetchUserData();\r\n    }, [props.route.params.uid, props.following, props.currentUser, props.posts]);\r\n\r\n    const onFollow = async () => {\r\n        try {\r\n            const followDoc = doc(firestore, \"following\", auth.currentUser.uid, \"userFollowing\", props.route.params.uid);\r\n            await setDoc(followDoc, {});\r\n\r\n            props.sendNotification(\r\n                user.notificationToken,\r\n                \"New Follower\",\r\n                `${props.currentUser.name} started following you`,\r\n                { type: 'profile', user: auth.currentUser.uid }\r\n            );\r\n        } catch (error) {\r\n            console.error(\"Error following user:\", error);\r\n        }\r\n    };\r\n\r\n    const onUnfollow = async () => {\r\n        try {\r\n            const followDoc = doc(firestore, \"following\", auth.currentUser.uid, \"userFollowing\", props.route.params.uid);\r\n            await deleteDoc(followDoc);\r\n        } catch (error) {\r\n            console.error(\"Error unfollowing user:\", error);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <View style={{ height: '100%', justifyContent: 'center', margin: 'auto' }}>\r\n                <ActivityIndicator style={{ alignSelf: 'center', marginBottom: 20 }} size=\"large\" color=\"#00ff00\" />\r\n                <Text style={[text.notAvailable]}>Loading</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return (\r\n            <View style={{ height: '100%', justifyContent: 'center', margin: 'auto' }}>\r\n                <FontAwesome5 style={{ alignSelf: 'center', marginBottom: 20 }} name=\"dizzy\" size={40} color=\"black\" />\r\n                <Text style={[text.notAvailable]}>User Not Found</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ScrollView style={[container.container, utils.backgroundWhite]}>\r\n            <View style={[container.profileInfo]}>\r\n                <View style={[utils.noPadding, container.row]}>\r\n                    {user.image === 'default' ? (\r\n                        <FontAwesome5\r\n                            style={[utils.profileImageBig, utils.marginBottomSmall]}\r\n                            name=\"user-circle\"\r\n                            size={80}\r\n                            color=\"black\"\r\n                        />\r\n                    ) : (\r\n                        <Image\r\n                            style={[utils.profileImageBig, utils.marginBottomSmall]}\r\n                            source={{ uri: user.image }}\r\n                        />\r\n                    )}\r\n                    <View style={[container.container, container.horizontal, utils.justifyCenter, utils.padding10Sides]}>\r\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\r\n                            <Text style={[text.bold, text.large, text.center]}>{userPosts.length}</Text>\r\n                            <Text style={[text.center]}>Posts</Text>\r\n                        </View>\r\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\r\n                            <Text style={[text.bold, text.large, text.center]}>{user.followersCount}</Text>\r\n                            <Text style={[text.center]}>Followers</Text>\r\n                        </View>\r\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\r\n                            <Text style={[text.bold, text.large, text.center]}>{user.followingCount}</Text>\r\n                            <Text style={[text.center]}>Following</Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n\r\n                <View>\r\n                    <Text style={text.bold}>{user.name}</Text>\r\n                    <Text style={[text.profileDescription, utils.marginBottom]}>{user.description}</Text>\r\n\r\n                    {props.route.params.uid !== auth.currentUser.uid ? (\r\n                        <View style={[container.horizontal]}>\r\n                            {following ? (\r\n                                <TouchableOpacity\r\n                                    style={[utils.buttonOutlined, container.container, utils.margin15Right]}\r\n                                    onPress={onUnfollow}\r\n                                >\r\n                                    <Text style={[text.bold, text.center, text.green]}>Following</Text>\r\n                                </TouchableOpacity>\r\n                            ) : (\r\n                                <TouchableOpacity\r\n                                    style={[utils.buttonOutlined, container.container, utils.margin15Right]}\r\n                                    onPress={onFollow}\r\n                                >\r\n                                    <Text style={[text.bold, text.center, { color: '#2196F3' }]}>Follow</Text>\r\n                                </TouchableOpacity>\r\n                            )}\r\n                            <TouchableOpacity\r\n                                style={[utils.buttonOutlined, container.container]}\r\n                                onPress={() => props.navigation.navigate('Chat', { user })}\r\n                            >\r\n                                <Text style={[text.bold, text.center]}>Message</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                    ) : (\r\n                        <TouchableOpacity\r\n                            style={utils.buttonOutlined}\r\n                            onPress={() => props.navigation.navigate('Edit')}\r\n                        >\r\n                            <Text style={[text.bold, text.center]}>Edit Profile</Text>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                </View>\r\n            </View>\r\n\r\n            <View style={[utils.borderTopGray]}>\r\n                <FlatList\r\n                    numColumns={3}\r\n                    horizontal={false}\r\n                    data={userPosts}\r\n                    renderItem={({ item }) => (\r\n                        <TouchableOpacity\r\n                            style={[container.containerImage, utils.borderWhite]}\r\n                            onPress={() => props.navigation.navigate(\"Post\", { item, user })}\r\n                        >\r\n                            {item.type === 0 ? (\r\n                                <CachedImage cacheKey={item.id} style={container.image} source={{ uri: item.downloadURLStill }} />\r\n                            ) : (\r\n                                <CachedImage cacheKey={item.id} style={container.image} source={{ uri: item.downloadURL }} />\r\n                            )}\r\n                        </TouchableOpacity>\r\n                    )}\r\n                />\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (store) => ({\r\n    currentUser: store.userState.currentUser,\r\n    posts: store.userState.posts,\r\n    following: store.userState.following,\r\n});\r\n\r\nconst mapDispatchProps = (dispatch) => bindActionCreators({ sendNotification }, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Profile);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
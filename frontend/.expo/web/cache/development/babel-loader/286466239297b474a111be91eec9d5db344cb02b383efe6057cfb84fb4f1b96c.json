{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { Entypo, Feather, FontAwesome5 } from '@expo/vector-icons';\nimport { useIsFocused } from '@react-navigation/native';\nimport { Video } from 'expo-av';\nimport VideoPlayer from 'expo-video-player';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport BottomSheet from 'react-native-bottomsheet-reanimated';\nimport { Divider, Snackbar } from 'react-native-paper';\nimport ParsedText from 'react-native-parsed-text';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { deletePost, fetchUserPosts, sendNotification } from \"../../../redux/actions/index\";\nimport { container, text, utils } from \"../../styles\";\nimport { timeDifference } from \"../../utils\";\nimport CachedImage from \"../random/CachedImage\";\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore, doc, getDoc, collection, onSnapshot, query, orderBy, setDoc, deleteDoc } from 'firebase/firestore';\nvar auth = getAuth();\nvar db = getFirestore();\nvar WINDOW_WIDTH = Dimensions.get('window').width;\nfunction Post(props) {\n  var _useState = useState(props.route.params.item),\n    _useState2 = _slicedToArray(_useState, 2),\n    item = _useState2[0],\n    setItem = _useState2[1];\n  var _useState3 = useState(props.route.params.user),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentUserLike = _useState6[0],\n    setCurrentUserLike = _useState6[1];\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    unmutted = _useState8[0],\n    setUnmutted = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    videoref = _useState10[0],\n    setVideoref = _useState10[1];\n  var _useState11 = useState(useRef(null)),\n    _useState12 = _slicedToArray(_useState11, 2),\n    sheetRef = _useState12[0],\n    setSheetRef = _useState12[1];\n  var _useState13 = useState({\n      visible: false,\n      item: null\n    }),\n    _useState14 = _slicedToArray(_useState13, 2),\n    modalShow = _useState14[0],\n    setModalShow = _useState14[1];\n  var _useState15 = useState(true),\n    _useState16 = _slicedToArray(_useState15, 2),\n    isValid = _useState16[0],\n    setIsValid = _useState16[1];\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    exists = _useState18[0],\n    setExists = _useState18[1];\n  var _useState19 = useState(false),\n    _useState20 = _slicedToArray(_useState19, 2),\n    loaded = _useState20[0],\n    setLoaded = _useState20[1];\n  var isFocused = useIsFocused();\n  useEffect(function () {\n    var fetchPostData = function fetchPostData() {\n      var userRef, userSnap, userData, postRef, postSnap, postData, likesRef, _likesRef;\n      return _regeneratorRuntime.async(function fetchPostData$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!props.route.params.notification) {\n              _context.next = 15;\n              break;\n            }\n            userRef = doc(db, 'users', props.route.params.user);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(getDoc(userRef));\n          case 4:\n            userSnap = _context.sent;\n            if (userSnap.exists()) {\n              userData = _objectSpread(_objectSpread({}, userSnap.data()), {}, {\n                uid: userSnap.id\n              });\n              setUser(userData);\n            }\n            postRef = doc(db, 'posts', props.route.params.user, 'userPosts', props.route.params.item);\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(getDoc(postRef));\n          case 9:\n            postSnap = _context.sent;\n            if (postSnap.exists()) {\n              postData = _objectSpread(_objectSpread({}, postSnap.data()), {}, {\n                id: postSnap.id\n              });\n              setItem(postData);\n              setExists(true);\n            }\n            likesRef = doc(postRef, 'likes', auth.currentUser.uid);\n            onSnapshot(likesRef, function (snapshot) {\n              setCurrentUserLike(snapshot.exists());\n            });\n            _context.next = 20;\n            break;\n          case 15:\n            _likesRef = doc(db, 'posts', props.route.params.user.uid, 'userPosts', props.route.params.item.id, 'likes', auth.currentUser.uid);\n            onSnapshot(_likesRef, function (snapshot) {\n              setCurrentUserLike(snapshot.exists());\n            });\n            setItem(props.route.params.item);\n            setUser(props.route.params.user);\n            setExists(true);\n          case 20:\n            setLoaded(true);\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }, null, null, null, Promise);\n    };\n    fetchPostData();\n  }, [props.route.params.notification, props.route.params.item]);\n  useEffect(function () {\n    if (videoref) {\n      videoref.setIsMutedAsync(props.route.params.unmutted);\n    }\n    setUnmutted(props.route.params.unmutted);\n  }, [props.route.params.unmutted]);\n  useEffect(function () {\n    if (videoref) {\n      if (isFocused) {\n        videoref.playAsync();\n      } else {\n        videoref.stopAsync();\n      }\n    }\n  }, [props.route.params.index, props.route.params.inViewPort]);\n  var onLikePress = function onLikePress(userId, postId, item) {\n    var likesRef;\n    return _regeneratorRuntime.async(function onLikePress$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          item.likesCount += 1;\n          setCurrentUserLike(true);\n          likesRef = doc(db, 'posts', userId, 'userPosts', postId, 'likes', auth.currentUser.uid);\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(setDoc(likesRef, {}));\n        case 5:\n          props.sendNotification(user.notificationToken, 'New Like', props.currentUser.name + \" liked your post\", {\n            type: 0,\n            postId: postId,\n            user: auth.currentUser.uid\n          });\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, null, null, null, Promise);\n  };\n  var onDislikePress = function onDislikePress(userId, postId, item) {\n    var likesRef;\n    return _regeneratorRuntime.async(function onDislikePress$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          item.likesCount -= 1;\n          setCurrentUserLike(false);\n          likesRef = doc(db, 'posts', userId, 'userPosts', postId, 'likes', auth.currentUser.uid);\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(deleteDoc(likesRef));\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, null, null, null, Promise);\n  };\n  if (!exists && loaded) {\n    return React.createElement(View, {\n      style: {\n        height: '100%',\n        justifyContent: 'center',\n        margin: 'auto'\n      }\n    }, React.createElement(FontAwesome5, {\n      style: {\n        alignSelf: 'center',\n        marginBottom: 20\n      },\n      name: \"dizzy\",\n      size: 40,\n      color: \"black\"\n    }), React.createElement(Text, {\n      style: [text.notAvailable]\n    }, \"Post does not exist\"));\n  }\n  if (!loaded || user === undefined || item === null) {\n    return React.createElement(View, null);\n  }\n  var _handleVideoRef = function _handleVideoRef(component) {\n    setVideoref(component);\n    if (component) {\n      component.setIsMutedAsync(props.route.params.unmutted);\n    }\n  };\n  if (videoref) {\n    videoref.setIsMutedAsync(unmutted);\n    if (isFocused && props.route.params.index === props.route.params.inViewPort) {\n      videoref.playAsync();\n    } else {\n      videoref.stopAsync();\n    }\n  }\n  if (sheetRef.current && !props.route.params.feed) {\n    modalShow.visible ? sheetRef.snapTo(0) : sheetRef.snapTo(1);\n  }\n  return React.createElement(View, {\n    style: [container.container, utils.backgroundWhite]\n  });\n}\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser\n  };\n};\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return bindActionCreators({\n    sendNotification: sendNotification,\n    fetchUserPosts: fetchUserPosts,\n    deletePost: deletePost\n  }, dispatch);\n};\nexport default connect(mapStateToProps, mapDispatchProps)(Post);","map":{"version":3,"names":["Entypo","Feather","FontAwesome5","useIsFocused","Video","VideoPlayer","React","useEffect","useRef","useState","Dimensions","Image","Text","TouchableOpacity","View","BottomSheet","Divider","Snackbar","ParsedText","connect","bindActionCreators","deletePost","fetchUserPosts","sendNotification","container","text","utils","timeDifference","CachedImage","getAuth","getFirestore","doc","getDoc","collection","onSnapshot","query","orderBy","setDoc","deleteDoc","auth","db","WINDOW_WIDTH","get","width","Post","props","_useState","route","params","item","_useState2","_slicedToArray","setItem","_useState3","user","_useState4","setUser","_useState5","_useState6","currentUserLike","setCurrentUserLike","_useState7","_useState8","unmutted","setUnmutted","_useState9","_useState10","videoref","setVideoref","_useState11","_useState12","sheetRef","setSheetRef","_useState13","visible","_useState14","modalShow","setModalShow","_useState15","_useState16","isValid","setIsValid","_useState17","_useState18","exists","setExists","_useState19","_useState20","loaded","setLoaded","isFocused","fetchPostData","userRef","userSnap","userData","postRef","postSnap","postData","likesRef","_likesRef","_regeneratorRuntime","async","fetchPostData$","_context","prev","next","notification","awrap","sent","_objectSpread","data","uid","id","currentUser","snapshot","stop","Promise","setIsMutedAsync","playAsync","stopAsync","index","inViewPort","onLikePress","userId","postId","onLikePress$","_context2","likesCount","notificationToken","name","type","onDislikePress","onDislikePress$","_context3","createElement","style","height","justifyContent","margin","alignSelf","marginBottom","size","color","notAvailable","undefined","_handleVideoRef","component","current","feed","snapTo","backgroundWhite","mapStateToProps","store","userState","mapDispatchProps","dispatch"],"sources":["C:/Users/alexd/Documents/InstagramClone/frontend/components/main/post/Post.js"],"sourcesContent":["import { Entypo, Feather, FontAwesome5 } from '@expo/vector-icons';\r\nimport { useIsFocused } from '@react-navigation/native';\r\nimport { Video } from 'expo-av';\r\nimport VideoPlayer from 'expo-video-player';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Dimensions, Image, Text, TouchableOpacity, View } from 'react-native';\r\nimport BottomSheet from 'react-native-bottomsheet-reanimated';\r\nimport { Divider, Snackbar } from 'react-native-paper';\r\nimport ParsedText from 'react-native-parsed-text';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { deletePost, fetchUserPosts, sendNotification } from '../../../redux/actions/index';\r\nimport { container, text, utils } from '../../styles';\r\nimport { timeDifference } from '../../utils';\r\nimport CachedImage from '../random/CachedImage';\r\nimport { getAuth } from 'firebase/auth';\r\nimport {\r\n    getFirestore,\r\n    doc,\r\n    getDoc,\r\n    collection,\r\n    onSnapshot,\r\n    query,\r\n    orderBy,\r\n    setDoc,\r\n    deleteDoc,\r\n} from 'firebase/firestore';\r\n\r\nconst auth = getAuth();\r\nconst db = getFirestore();\r\n\r\nconst WINDOW_WIDTH = Dimensions.get('window').width;\r\n\r\nfunction Post(props) {\r\n    const [item, setItem] = useState(props.route.params.item);\r\n    const [user, setUser] = useState(props.route.params.user);\r\n    const [currentUserLike, setCurrentUserLike] = useState(false);\r\n    const [unmutted, setUnmutted] = useState(true);\r\n    const [videoref, setVideoref] = useState(null);\r\n    const [sheetRef, setSheetRef] = useState(useRef(null));\r\n    const [modalShow, setModalShow] = useState({ visible: false, item: null });\r\n    const [isValid, setIsValid] = useState(true);\r\n    const [exists, setExists] = useState(false);\r\n    const [loaded, setLoaded] = useState(false);\r\n\r\n    const isFocused = useIsFocused();\r\n\r\n    useEffect(() => {\r\n        const fetchPostData = async () => {\r\n            if (props.route.params.notification) {\r\n                const userRef = doc(db, 'users', props.route.params.user);\r\n                const userSnap = await getDoc(userRef);\r\n                if (userSnap.exists()) {\r\n                    const userData = { ...userSnap.data(), uid: userSnap.id };\r\n                    setUser(userData);\r\n                }\r\n\r\n                const postRef = doc(db, 'posts', props.route.params.user, 'userPosts', props.route.params.item);\r\n                const postSnap = await getDoc(postRef);\r\n                if (postSnap.exists()) {\r\n                    const postData = { ...postSnap.data(), id: postSnap.id };\r\n                    setItem(postData);\r\n                    setExists(true);\r\n                }\r\n\r\n                const likesRef = doc(postRef, 'likes', auth.currentUser.uid);\r\n                onSnapshot(likesRef, (snapshot) => {\r\n                    setCurrentUserLike(snapshot.exists());\r\n                });\r\n            } else {\r\n                const likesRef = doc(\r\n                    db,\r\n                    'posts',\r\n                    props.route.params.user.uid,\r\n                    'userPosts',\r\n                    props.route.params.item.id,\r\n                    'likes',\r\n                    auth.currentUser.uid\r\n                );\r\n                onSnapshot(likesRef, (snapshot) => {\r\n                    setCurrentUserLike(snapshot.exists());\r\n                });\r\n\r\n                setItem(props.route.params.item);\r\n                setUser(props.route.params.user);\r\n                setExists(true);\r\n            }\r\n\r\n            setLoaded(true);\r\n        };\r\n\r\n        fetchPostData();\r\n    }, [props.route.params.notification, props.route.params.item]);\r\n\r\n    useEffect(() => {\r\n        if (videoref) {\r\n            videoref.setIsMutedAsync(props.route.params.unmutted);\r\n        }\r\n        setUnmutted(props.route.params.unmutted);\r\n    }, [props.route.params.unmutted]);\r\n\r\n    useEffect(() => {\r\n        if (videoref) {\r\n            if (isFocused) {\r\n                videoref.playAsync();\r\n            } else {\r\n                videoref.stopAsync();\r\n            }\r\n        }\r\n    }, [props.route.params.index, props.route.params.inViewPort]);\r\n\r\n    const onLikePress = async (userId, postId, item) => {\r\n        item.likesCount += 1;\r\n        setCurrentUserLike(true);\r\n\r\n        const likesRef = doc(db, 'posts', userId, 'userPosts', postId, 'likes', auth.currentUser.uid);\r\n        await setDoc(likesRef, {});\r\n\r\n        props.sendNotification(user.notificationToken, 'New Like', `${props.currentUser.name} liked your post`, {\r\n            type: 0,\r\n            postId,\r\n            user: auth.currentUser.uid,\r\n        });\r\n    };\r\n\r\n    const onDislikePress = async (userId, postId, item) => {\r\n        item.likesCount -= 1;\r\n        setCurrentUserLike(false);\r\n\r\n        const likesRef = doc(db, 'posts', userId, 'userPosts', postId, 'likes', auth.currentUser.uid);\r\n        await deleteDoc(likesRef);\r\n    };\r\n\r\n    if (!exists && loaded) {\r\n        return (\r\n            <View style={{ height: '100%', justifyContent: 'center', margin: 'auto' }}>\r\n                <FontAwesome5 style={{ alignSelf: 'center', marginBottom: 20 }} name=\"dizzy\" size={40} color=\"black\" />\r\n                <Text style={[text.notAvailable]}>Post does not exist</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    if (!loaded || user === undefined || item === null) {\r\n        return <View />;\r\n    }\r\n\r\n    const _handleVideoRef = (component) => {\r\n        setVideoref(component);\r\n        if (component) {\r\n            component.setIsMutedAsync(props.route.params.unmutted);\r\n        }\r\n    };\r\n\r\n    if (videoref) {\r\n        videoref.setIsMutedAsync(unmutted);\r\n        if (isFocused && props.route.params.index === props.route.params.inViewPort) {\r\n            videoref.playAsync();\r\n        } else {\r\n            videoref.stopAsync();\r\n        }\r\n    }\r\n\r\n    if (sheetRef.current && !props.route.params.feed) {\r\n        modalShow.visible ? sheetRef.snapTo(0) : sheetRef.snapTo(1);\r\n    }\r\n\r\n    return (\r\n        <View style={[container.container, utils.backgroundWhite]}>\r\n            {/* Post Header */}\r\n            {/* Post Content */}\r\n            {/* Post Footer */}\r\n            {/* Bottom Sheet */}\r\n        </View>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (store) => ({\r\n    currentUser: store.userState.currentUser,\r\n});\r\n\r\nconst mapDispatchProps = (dispatch) =>\r\n    bindActionCreators({ sendNotification, fetchUserPosts, deletePost }, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Post);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}